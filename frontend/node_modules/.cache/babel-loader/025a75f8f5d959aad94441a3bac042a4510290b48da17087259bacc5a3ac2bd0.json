{"ast":null,"code":"import React,{useState,useMemo,useRef,useEffect}from'react';import moment from'moment';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Chat(_ref){let{socket,name,room}=_ref;const[message,setMessage]=useState(\"\");const[allmessage,setAllmessage]=useState([]);const messageEnd=useRef(null);const sendMessage=async()=>{if(message!==\"\"){const messageData={room:room,author:name,message:message,time:moment().format('LT')};await socket.emit(\"send-message\",messageData);setAllmessage(list=>[...list,messageData]);setMessage(\"\");}};useMemo(()=>{socket.on(\"receive-message\",data=>{console.log(data);setAllmessage(list=>[...list,data]);});},[socket]);useEffect(()=>{var _messageEnd$current;(_messageEnd$current=messageEnd.current)===null||_messageEnd$current===void 0?void 0:_messageEnd$current.scrollIntoView();},[allmessage]);return/*#__PURE__*/_jsxs(\"div\",{className:\"chat\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-head\",children:/*#__PURE__*/_jsx(\"h1\",{children:room})}),/*#__PURE__*/_jsxs(\"div\",{className:\"allmessages\",children:[allmessage.map((item,index)=>{return/*#__PURE__*/_jsx(\"div\",{className:\"message\",id:name===item.author?\"you\":\"other\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"message-content\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"author\",children:item.author}),/*#__PURE__*/_jsx(\"h2\",{children:item.message}),/*#__PURE__*/_jsx(\"p\",{className:\"time\",children:item.time})]})},index);}),/*#__PURE__*/_jsx(\"div\",{ref:messageEnd})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"send\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"message-sent\",type:\"text\",value:message,placeholder:\"enter message...\",onChange:e=>{setMessage(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"send-button\",onClick:sendMessage,children:\"\\u25BA\"})]})]});}export default Chat;","map":{"version":3,"names":["React","useState","useMemo","useRef","useEffect","moment","jsx","_jsx","jsxs","_jsxs","Chat","_ref","socket","name","room","message","setMessage","allmessage","setAllmessage","messageEnd","sendMessage","messageData","author","time","format","emit","list","on","data","console","log","_messageEnd$current","current","scrollIntoView","className","children","map","item","index","id","ref","type","value","placeholder","onChange","e","target","onClick"],"sources":["C:/Users/hp/OneDrive/Desktop/React.JS/chat-app/frontend/src/chat.js"],"sourcesContent":["import React, { useState, useMemo, useRef, useEffect } from 'react';\r\nimport moment from 'moment';\r\n\r\nfunction Chat({ socket, name, room }) {\r\n\r\n    const [message, setMessage] = useState(\"\");\r\n    const [allmessage, setAllmessage] = useState([]);\r\n    const messageEnd = useRef(null);\r\n\r\n\r\n    const sendMessage = async () => {\r\n        if (message !== \"\") {\r\n            const messageData = {\r\n                room: room,\r\n                author: name,\r\n                message: message,\r\n                time: moment().format('LT'),\r\n            };\r\n\r\n            await socket.emit(\"send-message\", messageData);\r\n            setAllmessage((list) => [...list, messageData]);\r\n            setMessage(\"\");\r\n        }\r\n\r\n    };\r\n\r\n    useMemo(() => {\r\n        socket.on(\"receive-message\", (data) => {\r\n            console.log(data);\r\n            setAllmessage((list) => [...list, data]);\r\n        });\r\n\r\n    }, [socket]);\r\n\r\n    useEffect(()=>{\r\n       messageEnd.current?.scrollIntoView();\r\n    },[allmessage])\r\n\r\n    return (\r\n        <div className='chat'>\r\n            <div className='chat-head'>\r\n                <h1>{room}</h1>\r\n            </div>\r\n            <div className='allmessages'>\r\n                 {allmessage.map((item, index) => {\r\n                    return (\r\n                        <div className='message' key={index} \r\n                        id={name === item.author ? \"you\" : \"other\"} >\r\n                           \r\n                            <div className='message-content'>\r\n                                <p className='author'>{item.author}</p>\r\n                               <h2>{item.message}</h2> \r\n                               <p className='time'>{item.time}</p>\r\n                            </div>\r\n                            \r\n                        </div>)\r\n                })}\r\n              <div ref={messageEnd}></div>     \r\n            </div>\r\n            <div className='send'>\r\n                <input className=\"message-sent\"\r\n                    type=\"text\"\r\n                    value={message}\r\n                    placeholder=\"enter message...\"\r\n                    onChange={(e) => { setMessage(e.target.value); }} \r\n                   ></input>\r\n                <button className='send-button' onClick={sendMessage}>&#9658;</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chat"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}